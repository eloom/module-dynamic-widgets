define("jquery mage/storage underscore ko uiComponent Eloom_Core/js/model/url-builder Eloom_Geolocation/js/storage Magento_Customer/js/customer-data".split(" "),function(l,n,g,c,p,q,d,r){if(d.hasData()){var e=d.getAddressData(),b=c.observableArray([]),h=l.Deferred(),k=null,m=r.get("cart");d=c.computed(function(){return b().length});c=c.computed(function(){return 0===b().length});return p.extend({isEmpty:c,promotions:b,messageCount:d,initialize:function(){this._super();var a=this;a.fetchNewData();
m.subscribe(function(){a.fetchNewData()},this)},fetchNewData:function(){b().length=0;g.size(m().items)&&(n.post(q.createUrl("/eloom/dw/address",{}),JSON.stringify({country:e.country,region:e.state.name,regionId:e.state.id,postcode:e.postalCode}),!1).done(function(a){k=a;h.resolve()}).always(function(){h.reject()}),l.when(h).done(function(){try{if(k){var a=JSON.parse(k);a&&"200"==a.code&&g.each(a.data,function(f,t){g.contains(b,f)||b.push(f)})}}catch(f){console.log(f)}}.bind(this)).fail(function(){}.bind(this)).always(function(){}.bind(this)))}})}});
